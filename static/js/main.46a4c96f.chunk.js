(this.webpackJsonpcharts=this.webpackJsonpcharts||[]).push([[0],{27:function(t,a,e){t.exports={chartSelect:"SelectChartStart_chartSelect__3N4jJ"}},28:function(t,a,e){t.exports={ChartLine:"Line_ChartLine__-vWPu"}},29:function(t,a,e){t.exports={DoughnutChart:"Doughnut_DoughnutChart__2llRi"}},34:function(t,a,e){},55:function(t,a,e){"use strict";e.r(a);var n=e(4),s=e.n(n),r=e(25),o=e.n(r),i=(e(34),e(0)),d=e(3),c=e(7),l=e(26),u=e.n(l),h=e(1),b=e.n(h),p=e(27),f=e.n(p),D=e(2);function y(t){return Object(D.jsxs)("select",{className:f.a.chartSelect,value:t.value,onChange:t.onChange,children:[Object(D.jsx)("option",{value:"standart",children:"Shose limitation"}),Object(D.jsx)("option",{value:"day",children:"Today"}),Object(D.jsx)("option",{value:"week",children:"This Week"}),Object(D.jsx)("option",{value:"month",children:"This Month"}),Object(D.jsx)("option",{value:"monthLast",children:"Last Month"}),Object(D.jsx)("option",{value:"year",children:"This Year"}),Object(D.jsx)("option",{value:"yearLast",children:"Last Year"})]})}var O=e(10),j=e(12),m=e(13),v=e(15),x=e(14),g=e(6),w=e.n(g),C=e(28),M=e.n(C),k=function(t){Object(v.a)(e,t);var a=Object(x.a)(e);function e(){var t;Object(j.a)(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=a.call.apply(a,[this].concat(r))).chartRef=s.a.createRef(),t}return Object(m.a)(e,[{key:"componentDidMount",value:function(){this.initialChart()}},{key:"componentDidUpdate",value:function(t){t.data.startDate!==this.props.data.startDate&&this.initialChart()}},{key:"initialChart",value:function(){var t=this,a=this.chartRef.current.getContext("2d"),e=this.props.id;void 0!==window[e]&&window[e].destroy(),window[e]=new w.a(a,{type:"line",options:{responsive:!0,hover:{mode:"nearest",intersect:!1,animationDuration:100,onHover:function(t,e){if(e.length){var n=e[0]._model.x,s=e[0]._model.y,r=e[0]._yScale.bottom,o=e[0]._xScale.left;a.save(),a.beginPath(),a.moveTo(n,s-100),a.lineTo(n,r),a.moveTo(n+30,s),a.lineTo(o,s),a.globalAlpha=.6,a.lineWidth=1,a.strokeStyle=e[0]._options.hoverBackgroundColor,a.stroke(),a.beginPath(),a.arc(n,s,6,0,2*Math.PI),a.lineWidth=1,a.strokeStyle=e[0]._options.hoverBackgroundColor,a.stroke(),a.beginPath(),a.arc(n,s,3,0,2*Math.PI),a.lineWidth=1,a.strokeStyle=e[0]._options.hoverBackgroundColor,a.stroke(),a.restore()}}},legend:{display:this.props.legend,labels:{fontColor:"#fff",padding:30}},title:{display:!0,text:this.props.title,fontColor:"#fff",fontSize:20,position:"top",padding:0},scales:{xAxes:[{type:"time",time:{unit:this.props.unit,displayFormats:{year:"MMM'YY",month:"MMM'YY",week:"ddd'DD",day:"DD'MMM",hour:"DD' hA"}},parser:function(t){return b()(t).utcOffset("+0100")},ticks:{beginAtZero:!0,fontColor:"#fff",min:this.props.start,max:this.props.maxDate,padding:20,labelOffset:2},gridLines:{drawOnChartArea:!1,drawTicks:!1,color:"#fff"}}],yAxes:[Object(O.a)({type:"linear",stacked:!0,gridLines:{display:!1},ticks:{beginAtZero:!0,min:0,stepSize:this.props.stepSize,fontColor:"#fff",padding:20}},"gridLines",{drawOnChartArea:!1,drawTicks:!1,color:"#fff"})]},layout:{padding:{left:10,right:0,top:50,bottom:0}},tooltips:{intersect:!1,displayColors:!1,callbacks:{title:function(t,a){return t[0].value+",0"},label:function(t){return t.xLabel}},backgroundColor:"transparent",titleFontSize:15}},data:function(e){var n=t.props.data;if(n.datasets){var s=t.props.colors;n.datasets.forEach((function(e,n){e.backgroundColor=function(e,n,s){var r=a.createLinearGradient(0,0,0,320);return r.addColorStop(.6,n),r.addColorStop(1,t.props.gradient[s]),r}(0,s[n],n),e.borderColor=s[n],e.borderWidth=.5,e.pointHoverBackgroundColor=s[n],e.radius=.5,e.pointStyle="cross"}));var r=w.a.controllers.line.prototype.draw;w.a.helpers.extend(w.a.controllers.line.prototype,{draw:function(){r.apply(this,arguments),"month"===this.chart.options.scales.xAxes[0].time.unit?(this.chart.options.scales.xAxes[0].time.tooltipFormat="MMM'YY",this.chart.options.scales.xAxes[0].ticks.maxTicksLimit=12):this.chart.options.scales.xAxes[0].time.tooltipFormat="DD'MMM  hA"}})}return n}()})}},{key:"render",value:function(){return Object(D.jsx)("div",{className:M.a.ChartLine,children:Object(D.jsx)("canvas",{id:"mycanvas",ref:this.chartRef})})}}]),e}(n.Component),S=e(29),Y=e.n(S),_=function(t){Object(v.a)(e,t);var a=Object(x.a)(e);function e(){var t;Object(j.a)(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=a.call.apply(a,[this].concat(r))).chartRef=s.a.createRef(),t}return Object(m.a)(e,[{key:"componentDidMount",value:function(){this.initialChart()}},{key:"componentDidUpdate",value:function(t){t.data!==this.props.data&&this.initialChart()}},{key:"initialChart",value:function(){var t=this.chartRef.current.getContext("2d"),a=w.a.controllers.doughnut.prototype.draw;w.a.helpers.extend(w.a.controllers.doughnut.prototype,{draw:function(){a.apply(this,arguments);var t=this.chart.chart,e=t.ctx,n=t.width,s=t.height;t.config.data.radius="100%",t.config.data.innerRadius="80%",e.textAlign="center",e.font="40px Verdana",e.imageSmoothingEnabled=!1,e.lineWidth=2,e.textBaseline="middle",e.fillStyle="#fff";var r=this.chart.getDatasetMeta(0),o=0;this.chart.config.data.datasets[0].data.map((function(t,a){return!0===r.data[a].hidden?void 0:o+=t})),e.fillText(o,n/2-70,s/2+25)}});var e=this.props.id;void 0!==window[e]&&window[e].destroy(),window[e]=new w.a(t,{type:"doughnut",data:this.props.data,options:{cutoutPercentage:70,responsive:!0,elements:{arc:{borderWidth:0}},title:{display:!0,text:this.props.title,position:"top",fontColor:"#fff",horizontalAlign:"right",fontSize:20},legend:{display:!0,onClick:function(t,a){w.a.defaults.doughnut.legend.onClick.call(this,t,a)},position:"right",align:"center",fullWidth:!1,legendHitBoxes:{left:0},labels:{fontColor:"#fff",fontSize:14,padding:30,boxWidth:4,boxHeight:15}},tooltips:{callbacks:{label:function(t,a){return a.datasets[0].data[t.index]}},backgroundColor:"rgba(29, 62, 78,1)"}}})}},{key:"render",value:function(){return Object(D.jsx)("div",{className:Y.a.DoughnutChart,children:Object(D.jsx)("canvas",{id:"mycanvas",ref:this.chartRef})})}}]),e}(n.Component);function A(t){var a=[],e=[],n=[],s=[],r=[];t.forEach((function(t){return a=[].concat(Object(d.a)(a),[{x:new Date(t.date),y:1}]),e=[].concat(Object(d.a)(e),[b()(new Date(t.date)).format("M-YY")]),n=[].concat(Object(d.a)(n),[b()(new Date(t.date)).format("DD-MM-YY")]),s=[].concat(Object(d.a)(s),[b()(new Date(t.date)).format("DD-MM-YY-hA")]),r=[].concat(Object(d.a)(r),[new Date(t.date)])}));var o=[];e.map((function(t,n){if(e.indexOf(t)===n)return o=[].concat(Object(d.a)(o),[{x:a[n].x,y:1}]);o.find((function(e,s){if(b()(new Date(e.x)).format("M-YY")===t)return o[s]={x:a[n].x,y:e.y+1}}))}));var i=[];n.map((function(t,e){if(n.indexOf(t)===e)return i=[].concat(Object(d.a)(i),[{x:a[e].x,y:1}]);i.find((function(n,s){if(b()(new Date(n.x)).format("DD-MM-YY")===t)return i[s]={x:a[e].x,y:n.y+1}}))}));var c=[];return s.map((function(t,e){if(s.indexOf(t)===e)return c=[].concat(Object(d.a)(c),[{x:a[e].x,y:1}]);c.find((function(n,s){if(b()(new Date(n.x)).format("DD-MM-YY-hA")===t)return c[s]={x:a[e].x,y:n.y+1}}))})),r=new Date(Math.min.apply(null,r)),{allDays:Object(d.a)(a),uniqMonths:Object(d.a)(o),uniqDates:Object(d.a)(i),uniqHours:Object(d.a)(c),startDay:r}}function q(t){var a=0;return t.map((function(t){return a+=t.y})),a}var L=e(8),B=e.n(L);var T=function(){var t=Object(n.useState)([]),a=Object(c.a)(t,2),e=a[0],s=a[1],r=Object(n.useState)([]),o=Object(c.a)(r,2),l=o[0],h=o[1],p=Object(n.useState)(),f=Object(c.a)(p,2),O=f[0],j=f[1],m=Object(n.useState)([]),v=Object(c.a)(m,2),x=v[0],g=v[1],w=Object(n.useState)([]),C=Object(c.a)(w,2),M=C[0],S=C[1],Y=Object(n.useState)(),L=Object(c.a)(Y,2),T=L[0],V=L[1];return Object(n.useEffect)((function(){!function(){u()({method:"get",url:"dates.json",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(t){var a=A(t.data.visitors),e=new Date("2021-03-01 00:00:00");h({legend:!1,startDate:a.startDay,standartStart:a.startDay,maxDate:new Date(b()(e)),datasets:[{data:a.uniqMonths}]});var n=A(t.data.orders),r=A(t.data.subscriptions),o=new Date(Math.min.apply(null,[n.startDay,r.startDay]));s({legend:!0,startDate:o,standartStart:o,maxDate:new Date(b()(e)),datasets:[{label:"Subscriptions",data:r.uniqMonths},{label:"Orders",data:n.uniqMonths}]}),V("standart"),j({data:{labels:["Visitors","Orders","Subscriptions"],datasets:[{data:[q(a.uniqMonths),q(n.uniqMonths),q(r.uniqMonths)],backgroundColor:["cyan","#80c342","#d1d859"],hoverBackgroundColor:["cyan","#80c342","#d1d859"]}]}}),S({visitors:{allDays:Object(d.a)(a.allDays),dataDays:Object(d.a)(a.uniqDates),dataMonth:Object(d.a)(a.uniqMonths),dataHour:Object(d.a)(a.uniqHours)},orders:{allDays:Object(d.a)(n.allDays),dataDays:Object(d.a)(n.uniqDates),dataMonth:Object(d.a)(n.uniqMonths),dataHour:Object(d.a)(n.uniqHours)},subscriptions:{allDays:Object(d.a)(r.allDays),dataDays:Object(d.a)(r.uniqDates),dataMonth:Object(d.a)(r.uniqMonths),dataHour:Object(d.a)(r.uniqHours)}})})).catch((function(t){console.error(t)}));var t=new Date("2021-02-17 00:00:00"),a=new Date(b()(t).startOf("month")),e=new Date(b()(t).subtract(1,"months").startOf("month")),n=new Date(b()(t).startOf("isoweek")),r=new Date(b()(t).startOf("year")),o=new Date(b()(t).subtract(1,"year").startOf("year"));g({unit:"month",today:new Date(b()(t).startOf("day")),thisWeek:n,thisMonth:a,lastMonth:e,thisYear:r,lastYear:o})}()}),[]),Object(D.jsxs)("div",{className:B.a.wrapperCharts,children:[Object(D.jsx)("div",{className:B.a.optionsChart,children:Object(D.jsxs)("div",{className:B.a.ChartSelect,children:[Object(D.jsx)(y,{value:T,onChange:function(t){V(t.target.value),function(t){function a(t,a){return{newDaysVisitors:M.visitors.allDays.filter((function(e){return e.x>=t&&e.x<=a})),newDaysOrders:M.orders.allDays.filter((function(e){return e.x>=t&&e.x<=a})),newDaysSubscriptions:M.subscriptions.allDays.filter((function(e){return e.x>=t&&e.x<=a}))}}if("day"===t){g(Object(i.a)(Object(i.a)({},x),{},{unit:"hour"}));var n=a(x.today,new Date(b()(x.today).endOf("day")));h(Object(i.a)(Object(i.a)({},l),{},{startDate:x.today,maxDate:new Date(b()(x.today).endOf("day")),datasets:[{data:M.visitors.dataHour}]})),s(Object(i.a)(Object(i.a)({},e),{},{startDate:x.today,maxDate:new Date(b()(x.today).endOf("day")),datasets:[{label:"Subscriptions",data:M.subscriptions.dataHour},{label:"Orders",data:M.orders.dataHour}]})),j({data:{labels:["Visitors","Orders","Subscriptions"],datasets:[{data:[q(n.newDaysVisitors),q(n.newDaysOrders),q(n.newDaysSubscriptions)],backgroundColor:["cyan","#80c342","#d1d859"],hoverBackgroundColor:["cyan","#80c342","#d1d859"]}]}})}else if("week"===t){g(Object(i.a)(Object(i.a)({},x),{},{unit:"day"}));var r=a(x.thisWeek,new Date(b()(x.today).endOf("isoweek")));h(Object(i.a)(Object(i.a)({},l),{},{startDate:x.thisWeek,maxDate:new Date(b()(x.today).endOf("isoweek")),datasets:[{data:M.visitors.dataDays}]})),s(Object(i.a)(Object(i.a)({},e),{},{startDate:x.thisWeek,maxDate:new Date(b()(x.today).endOf("isoweek")),datasets:[{label:"Subscriptions",data:M.subscriptions.dataDays},{label:"Orders",data:M.orders.dataDays}]})),j({data:{labels:["Visitors","Orders","Subscriptions"],datasets:[{data:[q(r.newDaysVisitors),q(r.newDaysOrders),q(r.newDaysSubscriptions)],backgroundColor:["cyan","#80c342","#d1d859"],hoverBackgroundColor:["cyan","#80c342","#d1d859"]}]}})}else if("month"===t){g(Object(i.a)(Object(i.a)({},x),{},{unit:"day"}));var o=a(x.thisMonth,new Date(b()(x.today).endOf("month")));h(Object(i.a)(Object(i.a)({},l),{},{startDate:x.thisMonth,maxDate:new Date(b()(x.today).endOf("month")),datasets:[{data:M.visitors.dataDays}]})),s(Object(i.a)(Object(i.a)({},e),{},{startDate:x.thisMonth,maxDate:new Date(b()(x.today).endOf("month")),datasets:[{label:"Subscriptions",data:M.subscriptions.dataDays},{label:"Orders",data:M.orders.dataDays}]})),j({data:{labels:["Visitors","Orders","Subscriptions"],datasets:[{data:[q(o.newDaysVisitors),q(o.newDaysOrders),q(o.newDaysSubscriptions)],backgroundColor:["cyan","#80c342","#d1d859"],hoverBackgroundColor:["cyan","#80c342","#d1d859"]}]}})}else if("monthLast"===t){g(Object(i.a)(Object(i.a)({},x),{},{unit:"day"}));var d=a(x.lastMonth,new Date(b()(x.today).subtract(1,"months").endOf("month")));h(Object(i.a)(Object(i.a)({},l),{},{startDate:x.lastMonth,maxDate:new Date(b()(x.today).subtract(1,"months").endOf("month")),datasets:[{data:M.visitors.dataDays}]})),s(Object(i.a)(Object(i.a)({},e),{},{startDate:x.lastMonth,maxDate:new Date(b()(x.today).subtract(1,"months").endOf("month")),datasets:[{label:"Subscriptions",data:M.subscriptions.dataDays},{label:"Orders",data:M.orders.dataDays}]})),j({data:{labels:["Visitors","Orders","Subscriptions"],datasets:[{data:[q(d.newDaysVisitors),q(d.newDaysOrders),q(d.newDaysSubscriptions)],backgroundColor:["cyan","#80c342","#d1d859"],hoverBackgroundColor:["cyan","#80c342","#d1d859"]}]}})}else if("year"===t){g(Object(i.a)(Object(i.a)({},x),{},{unit:"month"}));var c=a(x.thisYear,new Date(b()(x.today).add(1,"M")));h(Object(i.a)(Object(i.a)({},l),{},{startDate:x.thisYear,maxDate:new Date(b()(x.today).add(1,"M")),datasets:[{data:M.visitors.dataMonth}]})),s(Object(i.a)(Object(i.a)({},e),{},{startDate:x.thisYear,maxDate:new Date(b()(x.today).add(1,"M")),datasets:[{label:"Subscriptions",data:M.subscriptions.dataMonth},{label:"Orders",data:M.orders.dataMonth}]})),j({data:{labels:["Visitors","Orders","Subscriptions"],datasets:[{data:[q(c.newDaysVisitors),q(c.newDaysOrders),q(c.newDaysSubscriptions)],backgroundColor:["cyan","#80c342","#d1d859"],hoverBackgroundColor:["cyan","#80c342","#d1d859"]}]}})}else if("yearLast"===t){g(Object(i.a)(Object(i.a)({},x),{},{unit:"month"}));var u=a(x.lastYear,new Date(b()(x.lastYear).endOf("year")));h(Object(i.a)(Object(i.a)({},l),{},{startDate:x.lastYear,maxDate:new Date(b()(x.lastYear).endOf("year")),datasets:[{data:M.visitors.dataMonth}]})),s(Object(i.a)(Object(i.a)({},e),{},{startDate:x.lastYear,maxDate:new Date(b()(x.lastYear).endOf("year")),datasets:[{label:"Subscriptions",data:M.subscriptions.dataMonth},{label:"Orders",data:M.orders.dataMonth}]})),j({data:{labels:["Visitors","Orders","Subscriptions"],datasets:[{data:[q(u.newDaysVisitors),q(u.newDaysOrders),q(u.newDaysSubscriptions)],backgroundColor:["cyan","#80c342","#d1d859"],hoverBackgroundColor:["cyan","#80c342","#d1d859"]}]}})}else"standart"===t&&(g(Object(i.a)(Object(i.a)({},x),{},{unit:"month"})),h(Object(i.a)(Object(i.a)({},l),{},{startDate:l.standartStart,maxDate:new Date(b()(x.today)),datasets:[{data:M.visitors.dataMonth}]})),s(Object(i.a)(Object(i.a)({},e),{},{startDate:e.standartStart,maxDate:new Date(b()(x.today)),datasets:[{label:"Subscriptions",data:M.subscriptions.dataMonth},{label:"Orders",data:M.orders.dataMonth}]})),j({data:{labels:["Visitors","Orders","Subscriptions"],datasets:[{data:[q(M.visitors.dataMonth),q(M.orders.dataMonth),q(M.subscriptions.dataMonth)],backgroundColor:["cyan","#80c342","#d1d859"],hoverBackgroundColor:["cyan","#80c342","#d1d859"]}]}}))}(t.target.value)}}),Object(D.jsxs)("div",{children:["Today:"," ",b()(x.today).format("MMM Do YY")]})]})}),Object(D.jsxs)("div",{className:B.a.leftChartsColumn,children:[l&&l.startDate&&Object(D.jsx)(k,{id:"visitors",stepSize:3,unit:x.unit,legend:l.legend,start:new Date(l.startDate),maxDate:l.maxDate,data:l,title:"Visitors",colors:["rgb(0, 255, 255)"],gradient:["rgba(0, 255, 255,0)"]}),e&&e.startDate&&Object(D.jsx)(k,{id:"multi",stepSize:3,unit:x.unit,legend:e.legend,start:new Date(e.startDate),maxDate:e.maxDate,data:e,title:"Multi Data",colors:["rgb(209, 216, 89)","rgb(128, 195, 66)"],gradient:["rgba(209, 216, 89,0)","rgba(128, 195, 66,0)"]})]}),Object(D.jsx)("div",{className:B.a.rightChartsColumn,children:O&&Object(D.jsx)(_,{id:"doughnut",data:O.data,title:"Total Events"})})]})};var V=function(){return Object(D.jsx)("div",{className:"App",children:Object(D.jsx)(T,{})})},H=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,56)).then((function(a){var e=a.getCLS,n=a.getFID,s=a.getFCP,r=a.getLCP,o=a.getTTFB;e(t),n(t),s(t),r(t),o(t)}))};o.a.render(Object(D.jsx)(s.a.StrictMode,{children:Object(D.jsx)(V,{})}),document.getElementById("root")),H()},8:function(t,a,e){t.exports={wrapperCharts:"Charts_wrapperCharts__3pDH4",optionsChart:"Charts_optionsChart__YpB2b",ChartSelect:"Charts_ChartSelect__suqrz",leftChartsColumn:"Charts_leftChartsColumn__2WwRq",rightChartsColumn:"Charts_rightChartsColumn__1E0eE"}}},[[55,1,2]]]);
//# sourceMappingURL=main.46a4c96f.chunk.js.map